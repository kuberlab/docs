



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.1">
    
    
      
        <title>kibernetika-serving - Kibernetika Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-36723568-3", "mkdocs.org")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#kibernetika-serving-ex-kuberlab-serving" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Kibernetika Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Kibernetika Documentation
            </span>
            <span class="md-header-nav__topic">
              kibernetika-serving
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Kibernetika Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Kibernetika Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Settings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Settings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../settings/user/" title="User" class="md-nav__link">
      User
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../settings/organization/" title="Organization" class="md-nav__link">
      Organization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../settings/billing/" title="Billing" class="md-nav__link">
      Billing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/create-new-project/" title="Create New Project" class="md-nav__link">
      Create New Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/working-with-projects/" title="Working With Projects" class="md-nav__link">
      Working With Projects
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Datasets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Datasets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../datasets/datasets/" title="Datasets Management" class="md-nav__link">
      Datasets Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Models
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Models
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../models/models/" title="Models Management" class="md-nav__link">
      Models Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Serving
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Serving
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../serving-start/" title="Start serving" class="md-nav__link">
      Start serving
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="./" title="Serving tool" class="md-nav__link">
      Serving tool
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Resources
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../resources/kibernetika-storage/" title="Storage" class="md-nav__link">
      Storage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/kdataset/" title="kdataset" class="md-nav__link">
      kdataset
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        kibernetika-serving
      </label>
    
    <a href="./" title="kibernetika-serving" class="md-nav__link md-nav__link--active">
      kibernetika-serving
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kibernetika-serving-ex-kuberlab-serving" title="kibernetika-serving (ex. kuberlab-serving)" class="md-nav__link">
    kibernetika-serving (ex. kuberlab-serving)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-it" title="What is it?" class="md-nav__link">
    What is it?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-interface" title="CLI interface" class="md-nav__link">
    CLI interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drivers" title="Drivers" class="md-nav__link">
    Drivers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tensorflow" title="TensorFlow" class="md-nav__link">
    TensorFlow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytorch" title="PyTorch" class="md-nav__link">
    PyTorch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intel-openvino" title="Intel OpenVINO" class="md-nav__link">
    Intel OpenVINO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#onnx-open-neural-network-exchange" title="ONNX (Open Neural Network Exchange)" class="md-nav__link">
    ONNX (Open Neural Network Exchange)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#null-driver" title="Null driver" class="md-nav__link">
    Null driver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hooks" title="Hooks" class="md-nav__link">
    Hooks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hooks-file-structure" title="Hooks file structure" class="md-nav__link">
    Hooks file structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#launching-multiple-models" title="Launching multiple models" class="md-nav__link">
    Launching multiple models
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-models-hooks-file-example" title="Multiple models hooks file example" class="md-nav__link">
    Multiple models hooks file example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ignore-skip-model-inference" title="Ignore (skip) model inference" class="md-nav__link">
    Ignore (skip) model inference
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/python-mlboardclient/" title="python-mlboardclient" class="md-nav__link">
      python-mlboardclient
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/project-page/" title="Project Page Tour" class="md-nav__link">
      Project Page Tour
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/openvino/" title="Using OpenVINO" class="md-nav__link">
      Using OpenVINO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/openvino-1/" title="Using OpenVINO New" class="md-nav__link">
      Using OpenVINO New
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      HowTo
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        HowTo
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/cifar-10/" title="Train CIFAR-10 Model from scratch using Kibernetika.AI" class="md-nav__link">
      Train CIFAR-10 Model from scratch using Kibernetika.AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/object-detection-pets/" title="Train model for object-detecion using object-detection API" class="md-nav__link">
      Train model for object-detecion using object-detection API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/about/" title="Copyright" class="md-nav__link">
      Copyright
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Misc
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Misc
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12-1" type="checkbox" id="nav-12-1">
    
    <label class="md-nav__link" for="nav-12-1">
      python-mlboardclent
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-12-1">
        python-mlboardclent
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/python-mlboardclient/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/python-mlboardclient/getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/python-mlboardclient/datasets-and-models/" title="Datasets and Models" class="md-nav__link">
      Datasets and Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/python-mlboardclient/dive-into-tasks/" title="Dive into tasks" class="md-nav__link">
      Dive into tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/python-mlboardclient/tf-conf-gen/" title="TensorFlow distribute configuration" class="md-nav__link">
      TensorFlow distribute configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/python-mlboardclient/upload-model/" title="Uploading a model" class="md-nav__link">
      Uploading a model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/python-mlboardclient/work-with-tasks/" title="Working with tasks" class="md-nav__link">
      Working with tasks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kibernetika-serving-ex-kuberlab-serving" title="kibernetika-serving (ex. kuberlab-serving)" class="md-nav__link">
    kibernetika-serving (ex. kuberlab-serving)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-it" title="What is it?" class="md-nav__link">
    What is it?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-interface" title="CLI interface" class="md-nav__link">
    CLI interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drivers" title="Drivers" class="md-nav__link">
    Drivers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tensorflow" title="TensorFlow" class="md-nav__link">
    TensorFlow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytorch" title="PyTorch" class="md-nav__link">
    PyTorch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intel-openvino" title="Intel OpenVINO" class="md-nav__link">
    Intel OpenVINO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#onnx-open-neural-network-exchange" title="ONNX (Open Neural Network Exchange)" class="md-nav__link">
    ONNX (Open Neural Network Exchange)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#null-driver" title="Null driver" class="md-nav__link">
    Null driver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hooks" title="Hooks" class="md-nav__link">
    Hooks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hooks-file-structure" title="Hooks file structure" class="md-nav__link">
    Hooks file structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#launching-multiple-models" title="Launching multiple models" class="md-nav__link">
    Launching multiple models
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-models-hooks-file-example" title="Multiple models hooks file example" class="md-nav__link">
    Multiple models hooks file example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ignore-skip-model-inference" title="Ignore (skip) model inference" class="md-nav__link">
    Ignore (skip) model inference
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>kibernetika-serving</h1>
                
                <h2 id="kibernetika-serving-ex-kuberlab-serving">kibernetika-serving (ex. kuberlab-serving)<a class="headerlink" href="#kibernetika-serving-ex-kuberlab-serving" title="Permanent link">#</a></h2>
<p>This is a document describing the possibilities and parameters of
<strong>kibernetika-serving</strong> tool.</p>
<h2 id="what-is-it">What is it?<a class="headerlink" href="#what-is-it" title="Permanent link">#</a></h2>
<p><strong>kibernetika-serving</strong> tool is a generic machine-learning model runner.
Basically, it starts the gRPC server and receives google protobuf messages
(just like <code>tensorflow_model_server</code> does) and optionally, it can start
HTTP proxy to that gRPC server, so the requests to the server become much
more easier.</p>
<p>It supports the following machine learning frameworks and formats:</p>
<ul>
<li><strong>TensorFlow</strong></li>
<li><strong>ONNX</strong> (via Intel nGraph)</li>
<li><strong>Intel OpenVINO</strong></li>
<li><strong>PyTorch</strong></li>
</ul>
<p>Also, it can be run without model and all required logic may be in the
process hooks (see <a href="./#hooks">hooks</a> section below), for that need to take <code>null</code> driver.</p>
<p><strong>kibernetika-serving</strong> tool is available in <em>serving</em> containers:</p>
<ul>
<li><strong>kuberlab/serving:latest</strong> (basic image, doesn't include OpenVINO support)</li>
<li><strong>kuberlab/serving/latest-gpu</strong> (includes GPU-related stuff)</li>
<li><strong>kuberlab/serving:latest-openvino</strong> (includes OpenVINO)</li>
</ul>
<h2 id="cli-interface">CLI interface<a class="headerlink" href="#cli-interface" title="Permanent link">#</a></h2>
<p>Once you have an access to <strong>kibernetika-serving</strong> executable, you are ready to use it.
Let's see the options and flags which can be provided during start.</p>
<p><strong>Note</strong>: There is an alias <strong>kserving</strong> for <strong>kibernetika-serving</strong>.</p>
<pre><code>usage: kibernetika-serving [-h] [--driver DRIVER] --model-path MODEL_PATH
                        [--hooks HOOKS] [--option OPTION] [--port &lt;int&gt;]
                        [--http-enable]
                        [--http-server-command HTTP_SERVER_COMMAND]
                        [--http-port HTTP_PORT]
</code></pre>

<p>optional arguments:</p>
<ul>
<li><strong>-h, --help</strong> :           show this help message and exit</li>
<li><strong>--driver DRIVER</strong> :       Driver to use in ML serving server.</li>
<li><strong>--model-path MODEL_PATH</strong> : Path to model file or directory.</li>
<li><strong>--hooks HOOKS</strong> : Hooks python file containing preprocess(inputs) and postprocess(outputs) functions.</li>
<li><strong>--option OPTION, -o OPTION</strong> : Additional options specific to driver. format: -o option_name=option_value</li>
<li><strong>--port <int></strong> :         Port on which server will listen</li>
<li><strong>--http-enable</strong>:         Enables HTTP proxy for gRPC server</li>
<li><strong>--http-server-command HTTP_SERVER_COMMAND</strong> : Command for running http tfservable-proxy</li>
<li><strong>--http-port HTTP_PORT</strong> : Port for http server</li>
</ul>
<h2 id="drivers">Drivers<a class="headerlink" href="#drivers" title="Permanent link">#</a></h2>
<p>This section describes the list of available backends (drivers) and their specific options.</p>
<h4 id="tensorflow">TensorFlow<a class="headerlink" href="#tensorflow" title="Permanent link">#</a></h4>
<p>Driver name used in options: <strong>tensorflow</strong>.</p>
<p>Options which are used in TensorFlow driver (may be provided via <strong>-o option_name=option_value</strong>):</p>
<ul>
<li><strong>model_signature</strong>. Used if <strong>--model-path</strong> is a saved-model-dir.
If so, driver extracts provided model_signature from <strong>saved_model.pb</strong>.
Default value is <strong>serving_default</strong> (default constant in tensorflow package).
Example: <code>-o model_signature=transform</code></li>
<li><strong>inputs</strong>: Used only if <strong>--model-path</strong> is a .pb graph file. Service will
be using the provided tensor names as an input. Example: <code>-o inputs=input,prob1</code></li>
<li><strong>outputs</strong>: Used only if <strong>--model-path</strong> is a .pb graph file. Service will
be using the provided tensor names as an output. Example: <code>-o outputs=output,embeddings</code></li>
</ul>
<p>Values accessible from processing hooks:</p>
<ul>
<li><strong>graph</strong>: TensorFlow graph</li>
<li><strong>sess</strong>: TensorFlow session</li>
<li><strong>model_inputs</strong>: dict of tensor inputs, tensor name as a key and tensor as a value</li>
<li><strong>model_outputs</strong>: list of output tensor names</li>
<li><strong>driver</strong>: TensorFlowDriver object.</li>
</ul>
<h4 id="pytorch">PyTorch<a class="headerlink" href="#pytorch" title="Permanent link">#</a></h4>
<p>Driver name used in options: <strong>pytorch</strong>.</p>
<p>Options which are used in PyTorch driver (may be provided via <strong>-o option_name=option_value</strong>):</p>
<ul>
<li><strong>model_class</strong>. <strong>Required</strong>. It is an import path to PyTorch Net class.
Example: <code>-o model_class=package.module:NetClass</code></li>
</ul>
<p>Values accessible from processing hooks:</p>
<ul>
<li><strong>model</strong>: PyTorch model object</li>
<li><strong>model_class</strong>: PyTorch model class</li>
<li><strong>driver</strong>: PyTorchDriver object.</li>
</ul>
<h4 id="intel-openvino">Intel OpenVINO<a class="headerlink" href="#intel-openvino" title="Permanent link">#</a></h4>
<p>Driver name used in options: <strong>openvino</strong>.</p>
<p>Options which are used in Intel OpenVINO driver (may be provided via <strong>-o option_name=option_value</strong>):</p>
<ul>
<li><strong>model_weights</strong>: Path to weights (<em>.bin</em>) file. May be used in case weights
file is in another location with <em>.xml</em> file</li>
<li><strong>device</strong>: The device which should be used for computation. Multiple devices
can be provided so in this case <strong>HETERO</strong> plugin will be used.
Possible values: <strong>CPU</strong>, <strong>MYRIAD</strong>, <strong>FPGA</strong>. Examples:
<code>-o device=CPU</code>, <code>-o device=MYRIAD</code>, <code>-o device=CPU,MYRIAD</code>.</li>
<li><strong>flexible_batch_size</strong>: Use variable first dimension in input data. In this
case the network will be executed multiple times. For example, if your network
receive input shape (1, 28, 28) and outputs (1, 10), then <strong>flexible_batch_size</strong>
enables the possibility to pass (N, 28, 28) as an input. Then the serving
output will be (N, 10) accordingly to each input request. Example:
<code>-o flexible_batch_size=true</code></li>
</ul>
<p>Values accessible from processing hooks:</p>
<ul>
<li><strong>exec_net</strong>: Executable Network object</li>
<li><strong>model_inputs</strong>: Input model dict: input name -&gt; input shape</li>
<li><strong>model_outputs</strong>: Output name list</li>
<li><strong>plugin</strong>: Plugin object (may be used in order to load more networks
in hooks on the same device)</li>
<li><strong>driver</strong>: IntelOpenVINODriver object</li>
</ul>
<h4 id="onnx-open-neural-network-exchange">ONNX (Open Neural Network Exchange)<a class="headerlink" href="#onnx-open-neural-network-exchange" title="Permanent link">#</a></h4>
<p>Driver name used in options: <strong>onnx</strong>.</p>
<p>Options which are used in ONNX driver (may be provided via <strong>-o option_name=option_value</strong>):</p>
<ul>
<li><strong>runtime_backend</strong>: Runtime backend used for initilizing backend.
Possible values: <em>CPU</em>, <em>GPU</em>, <em>INTERPRETER</em>, <em>ARGON</em>, <em>NNP</em>. Default value - <strong>CPU</strong>.</li>
</ul>
<h4 id="null-driver">Null driver<a class="headerlink" href="#null-driver" title="Permanent link">#</a></h4>
<p>Driver name used in options: <strong>null</strong>.</p>
<p>This driver is essentially needed only for using in conjunction with hooks.
It provides the possibility to create your own serving logic without a
model at all. The driver itself just returns what it received as an input.</p>
<p>No other specific options are provided.</p>
<h2 id="hooks">Hooks<a class="headerlink" href="#hooks" title="Permanent link">#</a></h2>
<p>This section describes the possible ways of writing serving hooks and their capabilities.</p>
<h4 id="hooks-file-structure">Hooks file structure<a class="headerlink" href="#hooks-file-structure" title="Permanent link">#</a></h4>
<p>Basic hook functions set:</p>
<ul>
<li>
<p><code>init_hook(**params)</code>: function-initializer. <strong>params</strong> is a dict
containing all the options passed during start with <strong>-o</strong> flags and also
containing some additional parameters like <strong>model_path</strong>.</p>
</li>
<li>
<p><code>preprocess(inputs, ctx, **kwargs)</code>: Hook which executes before model inference.
Possible function declarations: <code>preprocess(inputs)</code> (<em>ctx</em> and <em>kwargs</em> unused),
<code>preprocess(inputs, ctx)</code> (<em>kwargs</em> unused), <code>preprocess(inputs, **kwargs)</code> (<em>ctx</em> unused).</p>
</li>
<li>
<p><code>postprocess(outputs, ctx, **kwargs)</code>: Hook which executes after model inference.
Possible function declarations: <code>postprocess(outputs)</code> (<em>ctx</em> and <em>kwargs</em> unused),
<code>postprocess(outputs, ctx)</code> (<em>kwargs</em> unused), <code>postprocess(outputs, **kwargs)</code> (<em>ctx</em> unused).</p>
</li>
</ul>
<p>Arguments in pre/postprocess hooks:</p>
<ul>
<li><strong>inputs</strong> - dict containing input numpy arrays, e.g. <code>{'input-name': &lt;numpy array&gt;}</code></li>
<li><strong>outputs</strong> - dict containing output numpy arrays, e.g. <code>{'output-name': &lt;numpy array&gt;}</code></li>
<li><strong>ctx</strong> - gRPC context object. It can be used to pass data from preprocess hook to postprocess hook. Example:
we can set some attribute to ctx object in preprocess hook and then read it in postprocess hook.</li>
<li><strong>**kwargs</strong> - key-value arguments from the driver. Each driver has
a different set of kwargs arguments which passed to the hook (see
<a href="./#drivers">driver</a> section for the details)</li>
</ul>
<p><strong>Hook example</strong></p>
<p>Here is a hook example which just logs the fact of calling itself.</p>
<p><code>hooks.py</code></p>
<pre><code class="python">import logging


LOG = logging.getLogger(__name__)


def init_hook(**params):
    LOG.info(&quot;Got params:&quot;)
    LOG.info(params)


def preprocess(inputs):
    &quot;&quot;&quot;Does processing inputs before the model inference.

    For example, here we can do checks, change shape and other ops.

    :param inputs: dict containing input numpy arrays:
    {'input-name': &lt;numpy array&gt;}
    :type inputs: dict
    :return: processed inputs dict
    &quot;&quot;&quot;
    LOG.info('Running preprocess...')
    return inputs


def postprocess(outputs):
    &quot;&quot;&quot;Does processing outputs after the model inference.

    :param outputs: dict containing input numpy arrays:
    {'input-name': &lt;numpy array&gt;}
    :type outputs: dict
    :return: processed outputs dict
    &quot;&quot;&quot;
    LOG.info('Running postprocess...')
    return outputs

</code></pre>

<h2 id="launching-multiple-models">Launching multiple models<a class="headerlink" href="#launching-multiple-models" title="Permanent link">#</a></h2>
<p>For launching more than 1 model, need to specify appropriate hooks for pre- and postprocessing in order
to connect current model output and a next model input. At the end - all the models are lining up in one
pipeline: <code>pre-hook1 -&gt; model1 -&gt; post-hook1 -&gt; pre-hook2 -&gt; model2 -&gt; post-hook2</code></p>
<p>Therefore, hook file requires more than one pre- and postprocessing functions. For doing that, <code>preprocess</code>
 and <code>postprocess</code> objects in the hooks file must be a <strong>list of functions</strong> with <code>model-number</code> length.
<code>None</code> in the list may mean that there is no hook in this place.</p>
<h4 id="multiple-models-hooks-file-example">Multiple models hooks file example<a class="headerlink" href="#multiple-models-hooks-file-example" title="Permanent link">#</a></h4>
<p>For the examples below, <code>kibernetika-serving</code> may be launched using the following command:</p>
<p><code>kibernetika-serving --driver null --model-path any --driver null --model-path any2</code></p>
<p><strong>Note:</strong> The example should work with <code>null</code> driver but you might be interested in changing
<code>--driver</code> and <code>--model-path</code> params for using your own driver and model. The example merely
shows a concept itself.</p>
<pre><code class="python">import logging


LOG = logging.getLogger(__name__)


def log(func):
    def decorator(*args):
        LOG.info('Running %s...' % func.__name__)
        return func(*args)
    return decorator


def init_hook(**params):
    LOG.info(&quot;Got params:&quot;)
    LOG.info(params)


@log
def preprocess1(inputs):
    return inputs


@log
def preprocess2(inputs):
    return inputs


@log
def postprocess1(outputs):
    return outputs


@log
def postprocess2(outputs):
    return outputs


preprocess = [preprocess1, preprocess2]
postprocess = [postprocess1, postprocess2]
</code></pre>

<p><strong>Partially implemented hooks:</strong></p>
<pre><code class="python">import logging


LOG = logging.getLogger(__name__)


def log(func):
    def decorator(*args):
        LOG.info('Running %s...' % func.__name__)
        return func(*args)
    return decorator


def init_hook(**params):
    LOG.info(&quot;Got params:&quot;)
    LOG.info(params)


@log
def preprocess1(inputs):
    return inputs

@log
def postprocess2(outputs):
    return outputs


preprocess = [preprocess1, None]
postprocess = [None, postprocess2]
</code></pre>

<h2 id="ignore-skip-model-inference">Ignore (skip) model inference<a class="headerlink" href="#ignore-skip-model-inference" title="Permanent link">#</a></h2>
<p>In some cases it needs to skip model inference (more useful when using
multiple models). For example, first model detects faces and the second one -
emotions on this faces. There is a case where there are no faces on image
at all - therefore emotion detection doesn't make sense anymore because
it requires face boxes.</p>
<p><strong>Example</strong>:</p>
<pre><code class="python">def preprocess1(inputs):
    return inputs

def postprocess1(outputs, ctx):
    # if length of face boxes is 0 -&gt; skip_next is True else False
    ctx.skip_next = len(outputs.get('face-boxes', [])) == 0

    returnt outputs

def preprocess2(inputs, ctx):
    if ctx.skip_next:
        inputs['ml-serving-ignore'] = True

    return inputs

def postprocess2(outputs, ctx):
    # Was skipped?
    if ctx.skip_next:
        # Nothing to return in case if skipped
        return {}

    return outputs


preprocess = [preprocess1, preprocess2]
postprocess = [postprocess1, postprocess2]
</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../tools/kdataset/" title="kdataset" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                kdataset
              </span>
            </div>
          </a>
        
        
          <a href="../../tools/python-mlboardclient/" title="python-mlboardclient" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                python-mlboardclient
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright 2018 Kibernetika Inc.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b806dc00.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>